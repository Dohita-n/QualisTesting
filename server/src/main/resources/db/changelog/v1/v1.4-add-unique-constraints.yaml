databaseChangeLog:
  - changeSet:
      id: 1.4.0
      author: claude
      changes:
        - sql:
            sql: DELETE FROM dataset_column_statistics WHERE id IN (
                  SELECT dcs.id FROM dataset_column_statistics dcs
                  INNER JOIN (
                    SELECT dataset_column_id, MAX(last_updated) as max_date
                    FROM dataset_column_statistics
                    GROUP BY dataset_column_id
                    HAVING COUNT(*) > 1
                  ) dups
                  ON dcs.dataset_column_id = dups.dataset_column_id
                  WHERE dcs.last_updated < dups.max_date
                )
                
  - changeSet:
      id: 1.4.1
      author: claude
      changes:
        - addUniqueConstraint:
            constraintName: uk_dataset_column_statistics_column_id
            tableName: dataset_column_statistics
            columnNames: dataset_column_id 