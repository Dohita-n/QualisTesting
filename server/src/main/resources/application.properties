spring.application.name=DataPreparationApp

spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}

logging.file.name=loggz.log

server.error.include-message=${SERVER_ERROR_INCLUDE_MESSAGE:ALWAYS}
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL}
spring.jpa.properties.hibernate.dialect=${SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT}


#Liquibase Settings
spring.liquibase.enabled=true
spring.liquibase.change-log=classpath:db/changelog/db.changelog-master.yaml


spring.liquibase.drop-first=false
spring.liquibase.clear-checksums=false
#Decomment this to make the migrations
#spring.liquibase.contexts=development 

# File Upload Settings
spring.servlet.multipart.enabled=true
spring.servlet.multipart.file-size-threshold=2KB
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=15MB
file.upload.dir=./uploads
file.upload.max-size=734003200

# Async Task Executor
spring.task.execution.pool.core-size=2
spring.task.execution.pool.max-size=5
spring.task.execution.pool.queue-capacity=100

# Spring Batch Settings
spring.batch.job.enabled=true
spring.batch.initialize-schema=always

spring.jpa.properties.hibernate.jdbc.batch_size=1000
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# JWT Settings
jwt.secret=${JWT_SECRET:QXplcnR5dmNzZHNkZHNmZGZzZGZkc2ZlcnR5dWl1cGlvcGlvcGlvcGlvcGlvcGlvcGl1cGl1cGl1cGl1cGl1cGl1cGl1cA==}
jwt.expiration=${JWT_EXPIRATION:86400000}
jwt.refresh-expiration=${JWT_REFRESH_EXPIRATION:604800000}
jwt.issuer=${JWT_ISSUER:mercure-it}

# Security Settings
server.tomcat.max-http-header-size=64KB
server.max-http-request-header-size=64KB
server.tomcat.max-http-form-post-size=64KB
server.tomcat.connection-timeout=5s

# Logging for security events
logging.level.org.springframework.security=INFO
logging.level.com.example.DataPreparationApp.Security=DEBUG

# Add these debugging properties at the end of the file

# Enable debug for Spring Security
logging.level.org.springframework.security=DEBUG

# Enable debug for our application
logging.level.com.example.DataPreparationApp=DEBUG

# Show SQL queries
spring.jpa.properties.hibernate.format_sql=true

# Avatar storage configuration
app.file-storage.root-dir=./uploads
app.base-url=https://localhost:8443

# HTTPS Configuration
server.port=8443
server.ssl.enabled=true
server.ssl.key-store=classpath:keystore/dataprep.p12
server.ssl.key-store-password=dataprep
server.ssl.key-store-type=PKCS12
server.ssl.key-alias=dataprep
# Redirect HTTP to HTTPS
server.http.port=8080